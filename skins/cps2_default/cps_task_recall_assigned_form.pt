<tal:block define="mcat nocall:here/portal_messages;
                   dummy python:request.set('breadcrumb_set',
                                             here.getTaskBreadCrumb(request))">
  <metal:block xmlns:tal="http://xml.zope.org/namespaces/tal"
               xmlns:metal="http://xml.zope.org/namespaces/metal"
               use-macro="here/main_template/macros/master">
    <metal:block fill-slot="base">
      <base href="." tal:attributes="href string:${here/absolute_url}/" />
    </metal:block>
    <metal:block fill-slot="script_plus">
        <script type="text/javascript">
        <!--
        function SetChecked(val) {
                dml=document.form;
                len = dml.elements.length;
                var i=0;
                for( i=0 ; i<len ; i++) {
                if (dml.elements[i].name == 'Ids:list') {
                        dml.elements[i].checked=val;
                        }
                }
        }

        function SetReverse() {
                dml=document.form;
                len = dml.elements.length;
                var i=0;
                for( i=0 ; i<len ; i++) {
                if (dml.elements[i].name == 'ids:list') {
                        dml.elements[i].checked=!dml.elements[i].checked;
                        }
                }
        }
        //-->
        </script>
      </metal:block>

    <metal:block fill-slot="header">
       <tal:block tal:replace="python:mcat('_heading_recall_assigned_members')"/>


    </metal:block>
    <metal:block fill-slot="main"
                 tal:define="users here/getAllAssignedMembers">
    <tal:block condition="users">
    <form action="doRecallAssigned" method="post" name="form">
      <br />
      <hr />
        <i align="justified" tal:content="structure python:mcat('_label_recall_explanation')" />
      <hr />
      <br />
      <table border="0" align="center" width="100%" cellpadding="2" cellspacing="1">
        <tr>
          <td>&nbsp;</td>
          <td>
            <strong>
              <span tal:replace="python:mcat('_label_name')" />
            </strong>
          </td>
          <td>
            <strong>
              <span tal:replace="python:mcat('_label_email')" />
            </strong>
          </td>
        </tr>
        <tr>
          <td colspan="3">
            <a href="javascript:SetReverse()">
              <strong tal:content="python:mcat('_label_All/None_')">
                Tous/Aucun
              </strong>
            </a>
          </td>
        </tr>
        <tal:block repeat="user users">
          <tr tal:condition="repeat/user/odd">
            <td>
              <input type="checkbox" name="ids:list" value=""
                     tal:condition="python:user.get('email', '') != ''"
                     tal:attributes="value python:user.get('email', '')" />
            </td>
            <td>
              <span tal:replace="python:user.get('fullname', '')" />
            </td>
            <td>
               <a href=""
                  tal:attributes="href python:'mailto:'+user.get('email', '')">
                 <span tal:replace="python:user.get('email', '')" />
               </a>
            </td>
          </tr>
          <tr tal:condition="repeat/user/even" bgcolor="#EEEEEE">
            <td >
              <input type="checkbox" name="ids:list" value=""
                     tal:condition="python:user.get('email', '') != ''"
                     tal:attributes="value python:user.get('email', '')" />
            </td>
            <td>
              <span tal:replace="python:user.get('fullname', '')" />
            </td>
            <td>
               <a href=""
                  tal:attributes="href python:'mailto:'+user.get('email', '')">
                 <span tal:replace="python:user.get('email', '')" />
               </a>
            </td>
          </tr>
        </tal:block>
        <tr>
          <td colspan="3">
            <a href="javascript:SetReverse()">
              <strong tal:content="python:mcat('_label_All/None_')">
                Tous/Aucun
              </strong>
            </a>
          </td>
        </tr>
      </table>
      <br />
      <input type="submit" name="submit" value=""
             tal:attributes="value python:mcat('_button_recall_')" />
    </form>
    </tal:block>
    <tal:block condition="not:users">
      <hr />
        <i align="justified" tal:content="structure python:mcat('_label_recall_no_users_assigned')" />
      <hr />
    </tal:block>
    </metal:block>
  </metal:block>
</tal:block>
