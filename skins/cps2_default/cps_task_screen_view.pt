<tal:block define="current_action string:view">
<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master">
  <metal:block fill-slot="base">
    <base href="." tal:attributes="href string:${here/absolute_url}/" />
  </metal:block>
<body>

<metal:block fill-slot="main">
<!--
  <p tal:content="structure python:mcat('_heading_screener_message')">
    You can edit your skinner by following the <strong>Skinner parameters</strong> action on the right.
  </p>
-->
  <tal:block define="task_lists python:here.portal_tasks.searchTasks(here.getParameters());
                     isManager python:mtool.checkPermission('Manage portal',portal_object)">

    <!-- BEGINNING OF MY TASKS -->
    <tal:block condition="python:task_lists.has_key('my_tasks') and task_lists['my_tasks'] != []">
      <tal:block  define="tasks python:task_lists['my_tasks']">
      <h2 tal:content="python:mcat('_heading_task_i_created')">
        The tasks I created.
      </h2>
      <form action="cps_task_edit" method="POST">
        <table border="0" align="center" width="100%" cellpadding="2" cellspacing="1">
        <tr bgcolor="#DDDDDD">
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_title')">Title</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_creator')">Creator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_indicator')">Indicator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_priority')">Priority</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_type')">Type</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_effective_date')">Effective Date</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_deadline')">Deadline</span>
             </strong>
          </td>
        </tr>
        <tal:block repeat="task tasks">
        <tal:block condition="repeat/task/even">
           <tr bgcolor="#EEEEEE">
              <td>
                <input type="checkbox" name="ids:list"
                       tal:attributes="value task/id"
                       tal:condition="python:task.isCreator() or isManager" />
              </td>
              <td>
                <tal:block define="status python:task.getStatus()">
                  <img src="red.gif"
                       tal:condition="python:status == 'late'" />
                  <img src="orange.gif"
                       tal:condition="python:status == 'assigned'" />
                  <img src="green.gif"
                       tal:condition="python:status == 'opened'" />
                  <img src="task_closed_icon.png"
                       tal:condition="python:status == 'closed'" />
                </tal:block>
              </td>
              <td>
                <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
              </td>
              <td>
                <span tal:replace="task/Creator" />
              </td>
              <td>
                <span tal:replace="task/task_indicator" />
              </td>
              <td>
                <span tal:replace="task/task_priority" />
              </td>
              <td>
                <span tal:replace="task/task_type" />
              </td>
              <td>
                <span tal:replace="task/start_task_date" />
              </td>
              <td>
                <span tal:replace="task/stop_task_date" />
              </td>
           </tr>
        </tal:block>
        <tal:block condition="repeat/task/odd">
          <tr>
             <td>
               <input type="checkbox" name="ids:list"
                      tal:attributes="value task/id"
                      tal:condition="python:task.isCreator() or isManager" />
             </td>
             <td>
                <tal:block define="status python:task.getStatus()">
                  <img src="red.gif"
                       tal:condition="python:status == 'late'" />
                  <img src="orange.gif"
                       tal:condition="python:status == 'assigned'" />
                  <img src="green.gif"
                       tal:condition="python:status == 'opened'" />
                  <img src="task_closed_icon.png"
                       tal:condition="python:status == 'closed'" />
                </tal:block>
              </td>
             <td>
               <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
             </td>
             <td>
               <span tal:replace="task/Creator" />
             </td>
             <td>
               <span tal:replace="task/task_indicator" />
             </td>
             <td>
               <span tal:replace="task/task_priority" />
             </td>
             <td>
               <span tal:replace="task/task_type" />
             </td>
             <td>
               <span tal:replace="task/start_task_date" />
             </td>
             <td>
               <span tal:replace="task/stop_task_date" />
             </td>
          </tr>
        </tal:block>
        </tal:block>
        <!-- ACTION PANEL -->
        <tr>
         <td colspan="9" align="right">
           <input type="submit" value="_button_delete"
             name="doDeleteTasks:method"
             tal:attributes="value python:mcat('_button_delete')" />
         </td>
        </tr>
        <!-- END ACTION PANEL -->
        </table>
      </form>
    </tal:block>
    </tal:block>
    <!-- END OF MY TASKS -->

    <!-- TASK ASSIGNED TO ME -->
    <tal:block condition="python:task_lists.has_key('my_affected_tasks') and task_lists['my_affected_tasks'] != []">
    <tal:block define="tasks python:task_lists['my_affected_tasks']">
      <h2 tal:content="python:mcat('_heading_task_affected_to_me')">
        The tasks affected to me.
      </h2>
      <form action="cps_task_edit" method="POST">
        <table border="0" align="center" width="100%" cellpadding="2"
        cellspacing="1">
        <tr bgcolor="#DDDDDD">
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_title')">Title</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_creator')">Creator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_indicator')">Indicator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_priority')">Priority</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_type')">Type</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_effective_date')">Effective Date</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_deadline')">Deadline</span>
             </strong>
          </td>
        </tr>
        <tal:block repeat="task tasks">
        <tal:block condition="repeat/task/even">
           <tr bgcolor="#EEEEEE">
              <td>
                <input type="checkbox" name="ids:list"
                       tal:attributes="value task/id"
                       tal:condition="python:task.isCreator() or isManager" />
              </td>
              <td>
                <tal:block define="status python:task.getStatus()">
                  <img src="red.gif"
                       tal:condition="python:status == 'late'" />
                  <img src="orange.gif"
                       tal:condition="python:status == 'assigned'" />
                  <img src="green.gif"
                       tal:condition="python:status == 'opened'" />
                  <img src="task_closed_icon.png"
                       tal:condition="python:status == 'closed'" />
                </tal:block>
              </td>
              <td>
                <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
              </td>
              <td>
                <span tal:replace="task/Creator" />
              </td>
              <td>
                <span tal:replace="task/task_indicator" />
              </td>
              <td>
                <span tal:replace="task/task_priority" />
              </td>
              <td>
                <span tal:replace="task/task_type" />
              </td>
              <td>
                <span tal:replace="task/start_task_date" />
              </td>
              <td>
                <span tal:replace="task/stop_task_date" />
              </td>
           </tr>
        </tal:block>
        <tal:block condition="repeat/task/odd">
          <tr>
             <td>
               <input type="checkbox" name="ids:list"
                      tal:attributes="value task/id"
                      tal:condition="python:task.isCreator() or isManager" />
             </td>
             <td>
                <tal:block define="status python:task.getStatus()">
                  <img src="red.gif"
                       tal:condition="python:status == 'late'" />
                  <img src="orange.gif"
                       tal:condition="python:status == 'assigned'" />
                  <img src="green.gif"
                       tal:condition="python:status == 'opened'" />
                  <img src="task_closed_icon.png"
                       tal:condition="python:status == 'closed'" />
                </tal:block>
              </td>
             <td>
               <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
             </td>
             <td>
               <span tal:replace="task/Creator" />
             </td>
             <td>
               <span tal:replace="task/task_indicator" />
             </td>
             <td>
               <span tal:replace="task/task_priority" />
             </td>
             <td>
               <span tal:replace="task/task_type" />
             </td>
             <td>
               <span tal:replace="task/start_task_date" />
             </td>
             <td>
               <span tal:replace="task/stop_task_date" />
             </td>
          </tr>
        </tal:block>
        </tal:block>
        <!-- ACTION PANEL -->
        <tr>
         <td colspan="9" align="right">
           <input type="submit" value="_button_delete"
             name="doDeleteTasks:method"
             tal:attributes="value python:mcat('_button_delete')" />
         </td>
        </tr>
        <!-- END ACTION PANEL -->
        </table>
      </form>
    </tal:block>
    </tal:block>
    <!-- TASK ASSIGNED TO ME -->

    <!-- TASK ASSIGNED TO ONE OF MY GROUPS -->
    <tal:block
    condition="python:task_lists.has_key('my_groups_affected_tasks') and task_lists['my_groups_affected_tasks'] != []">
    <tal:block define="tasks python:task_lists['my_groups_affected_tasks']">
      <h2 tal:content="python:mcat('_heading_task_affected_to_one_of_my_groups')">
        The tasks affected to one of my groups.
      </h2>
      <form action="cps_task_edit" method="POST">
        <table border="0" align="center" width="100%" cellpadding="2"
        cellspacing="1">
        <tr bgcolor="#DDDDDD">
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_title')">Title</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_creator')">Creator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_indicator')">Indicator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_priority')">Priority</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_type')">Type</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_effective_date')">Effective Date</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_deadline')">Deadline</span>
             </strong>
          </td>
        </tr>
        <tal:block repeat="task tasks">
        <tal:block condition="repeat/task/even">
           <tr bgcolor="#EEEEEE">
              <td>
                <input type="checkbox" name="ids:list"
                       tal:attributes="value task/id"
                       tal:condition="python:task.isCreator() or isManager" />
              </td>
              <td>
                <tal:block define="status python:task.getStatus()">
                  <img src="red.gif"
                       tal:condition="python:status == 'late'" />
                  <img src="orange.gif"
                       tal:condition="python:status == 'assigned'" />
                  <img src="green.gif"
                       tal:condition="python:status == 'opened'" />
                  <img src="task_closed_icon.png"
                       tal:condition="python:status == 'closed'" />
                </tal:block>
              </td>
              <td>
                <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
              </td>
              <td>
                <span tal:replace="task/Creator" />
              </td>
              <td>
                <span tal:replace="task/task_indicator" />
              </td>
              <td>
                <span tal:replace="task/task_priority" />
              </td>
              <td>
                <span tal:replace="task/task_type" />
              </td>
              <td>
                <span tal:replace="task/start_task_date" />
              </td>
              <td>
                <span tal:replace="task/stop_task_date" />
              </td>
           </tr>
        </tal:block>
        <tal:block condition="repeat/task/odd">
          <tr>
             <td>
               <input type="checkbox" name="ids:list"
                      tal:attributes="value task/id"
                      tal:condition="python:task.isCreator() or isManager" />
             </td>
             <td>
                <tal:block define="status python:task.getStatus()">
                  <img src="red.gif"
                       tal:condition="python:status == 'late'" />
                  <img src="orange.gif"
                       tal:condition="python:status == 'assigned'" />
                  <img src="green.gif"
                       tal:condition="python:status == 'opened'" />
                  <img src="task_closed_icon.png"
                       tal:condition="python:status == 'closed'" />
                </tal:block>
              </td>
             <td>
               <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
             </td>
             <td>
               <span tal:replace="task/Creator" />
             </td>
             <td>
               <span tal:replace="task/task_indicator" />
             </td>
             <td>
               <span tal:replace="task/task_priority" />
             </td>
             <td>
               <span tal:replace="task/task_type" />
             </td>
             <td>
               <span tal:replace="task/start_task_date" />
             </td>
             <td>
               <span tal:replace="task/stop_task_date" />
             </td>
          </tr>
        </tal:block>
        </tal:block>
        <!-- ACTION PANEL -->
        <tr>
         <td colspan="9" align="right">
           <input type="submit" value="_button_delete"
             name="doDeleteTasks:method"
             tal:attributes="value python:mcat('_button_delete')" />
         </td>
        </tr>
        <!-- END ACTION PANEL -->
        </table>
      </form>
    </tal:block>
    </tal:block>
    <!-- TASK ASSIGNED TO ONEOF MY GROUPS -->

    <!-- TASK I ACCEPTED -->
    <tal:block condition="python:task_lists.has_key('my_accepted_tasks') and task_lists['my_accepted_tasks'] != []">
    <tal:block define="tasks python:task_lists['my_accepted_tasks']">
      <h2 tal:content="python:mcat('_heading_task_i_accepted')">
        The tasks I accepted.
      </h2>
      <form action="cps_task_edit" method="POST">
        <table border="0" align="center" width="100%" cellpadding="2"
        cellspacing="1">
        <tr bgcolor="#DDDDDD">
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
            <span>&nbsp;</span>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_title')">Title</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_creator')">Creator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_indicator')">Indicator</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_priority')">Priority</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_type')">Type</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_effective_date')">Effective Date</span>
             </strong>
          </td>
          <td align="center">
             <strong>
               <span tal:replace="python:mcat('_label_deadline')">Deadline</span>
             </strong>
          </td>
        </tr>
        <tal:block repeat="task tasks">
        <tal:block condition="repeat/task/even">
           <tr bgcolor="#EEEEEE">
              <td>
                <input type="checkbox" name="ids:list"
                       tal:attributes="value task/id"
                       tal:condition="python:task.isCreator() or isManager" />
              </td>
              <td>
                <tal:block define="status python:task.getStatus()">
                    <img src="red.gif"
                         tal:condition="python:status == 'late'" />
                    <img src="orange.gif"
                         tal:condition="python:status == 'assigned'" />
                    <img src="green.gif"
                         tal:condition="python:status == 'opened'" />
                    <img src="task_closed_icon.png"
                         tal:condition="python:status == 'closed'" />
                </tal:block>
              </td>
              <td>
                <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
              </td>
              <td>
                <span tal:replace="task/Creator" />
              </td>
              <td>
                <span tal:replace="task/task_indicator" />
              </td>
              <td>
                <span tal:replace="task/task_priority" />
              </td>
              <td>
                <span tal:replace="task/task_type" />
              </td>
              <td>
                <span tal:replace="task/start_task_date" />
              </td>
              <td>
                <span tal:replace="task/stop_task_date" />
              </td>
           </tr>
        </tal:block>
        <tal:block condition="repeat/task/odd">
          <tr>
             <td>
               <input type="checkbox" name="ids:list"
                      tal:attributes="value task/id"
                      tal:condition="python:task.isCreator() or isManager" />
             </td>
             <td>
               <tal:block define="status python:task.getStatus()">
                    <img src="red.gif"
                         tal:condition="python:status == 'late'" />
                    <img src="orange.gif"
                         tal:condition="python:status == 'assigned'" />
                    <img src="green.gif"
                         tal:condition="python:status == 'opened'" />
                    <img src="task_closed_icon.png"
                         tal:condition="python:status == 'closed'" />
               </tal:block>
             </td>
             <td>
               <a href="."
                   tal:attributes="href string:${portal_url}/portal_tasks/${task/id}">
                  <span tal:replace="task/title_or_id" />
                </a>
             </td>
             <td>
               <span tal:replace="task/Creator" />
             </td>
             <td>
               <span tal:replace="task/task_indicator" />
             </td>
             <td>
               <span tal:replace="task/task_priority" />
             </td>
             <td>
               <span tal:replace="task/task_type" />
             </td>
             <td>
               <span tal:replace="task/start_task_date" />
             </td>
             <td>
               <span tal:replace="task/stop_task_date" />
             </td>
          </tr>
        </tal:block>
        </tal:block>
        <!-- ACTION PANEL -->
        <tr>
         <td colspan="9" align="right">
           <input type="submit" value="_button_delete"
             name="doDeleteTasks:method"
             tal:attributes="value python:mcat('_button_delete')" />
         </td>
        </tr>
        <!-- END ACTION PANEL -->
        </table>
      </form>
    </tal:block>
    </tal:block>
    <!-- TASK I ACCEPTED -->

  </tal:block>

  <metal:block use-macro="here/main_widgets/macros/discussion" />

</metal:block>


</body>
</html>
</tal:block>
