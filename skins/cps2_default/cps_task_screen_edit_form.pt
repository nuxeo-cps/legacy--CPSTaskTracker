<tal:block define="current_action string:edit;
                   create options/create|nothing">
<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="here/main_template/macros/master">
  <metal:block fill-slot="base">
    <base href="." tal:attributes="href string:${here/absolute_url}/">
  </metal:block>
<body>
<metal:block fill-slot="header">
  <tal:block condition="create"
    tal:content="python:mcat('heading_create_a_task_screen')">
    Create a task screen.
  </tal:block>
  <tal:block condition="not:create">
    <tal:block replace="python:mcat('_Modify_(object name)_')">
      Modify
    </tal:block>
    «&nbsp;<span tal:replace="here/title_or_id">Title</span>&nbsp;»
  </tal:block>
</metal:block>

<metal:block fill-slot="header_plus" />

<metal:block fill-slot="main"
  tal:define="title python:(create and [''] or [here.Title()])[0];
                 description python:(create and [''] or [here.Description()])[0];
                 submitvalue python:create and mcat('_button_create_') or mcat('_button_modify_');
                 action python:create and 'cpsdocument_create' or 'cpsdocument_edit';
                ">


  <form action="." method="post" enctype="multipart/form-data"
        tal:attributes="action action">

  <metal:block use-macro="here/main_widgets/macros/form">
    <metal:block fill-slot="content">

      <metal:block use-macro="here/main_widgets/macros/form_property">
        <metal:block fill-slot="title"
          tal:content="python:mcat('_prop_title_')">
          Title
        </metal:block>
        <metal:block fill-slot="content">
          <input type="text" name="title" value="title" tal:attributes="value title" />
        </metal:block>
      </metal:block>

      <metal:block use-macro="here/main_widgets/macros/form_property">
        <metal:block fill-slot="title"
          tal:content="python:mcat('_prop_description_')">
          Description
        </metal:block>
        <metal:block fill-slot="content">
          <textarea name="description:text" rows="5" cols="50" wrap="soft"
           tal:content="description"></textarea>
        </metal:block>
      </metal:block>

    </metal:block>
  </metal:block>

  <tal:block condition="create">
    <input type="hidden" name="type_name" value="CPS Task Screen">
    <input type="hidden" name="default_id_from" value="title" />
    <input type="hidden" name="default_title_from" value="description" />
  </tal:block>
  <input class="mainbutton" type="submit" value="." tal:attributes="value submitvalue">
  <input class="mainbutton" type="button" name="cancel" onclick="history.back()"
    tal:attributes="value python:mcat('_button_cancel_')">

  </form>

</metal:block>


</body>
</html>
</tal:block>
